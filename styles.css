:root{
  --bg: radial-gradient(900px 480px at 20% 10%, rgba(37,99,235,.14), transparent 70%),
        radial-gradient(900px 480px at 80% 80%, rgba(16,185,129,.12), transparent 70%),
        #f6f8fc;
  --card: rgba(255,255,255,.75);
  --line: rgba(15,23,42,.12);
  --text: #0f172a;
  --muted: rgba(15,23,42,.65);
  --blue: #2563eb;
  --shadow: 0 10px 30px rgba(15,23,42,.08);
  --radius: 18px;
}

*{ box-sizing:border-box; }

body{
  margin:0;
  font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  color: var(--text);
  background: var(--bg);
}

.muted{ color: var(--muted); font-size: 13px; }

/* TOPBAR */
.topbar{
  position: sticky;
  top: 0;
  z-index: 50;
  display:flex;
  gap:14px;
  align-items:center;
  justify-content:space-between;
  padding: 14px 18px;
  border-bottom: 1px solid var(--line);
  background: rgba(246,248,252,.88);
  backdrop-filter: blur(10px);
}

.topbar-left h1{
  margin:0;
  font-size: 18px;
  letter-spacing: -.2px;
}
.topbar-left .muted{ margin-top:2px; }

.topbar-chips{
  display:flex;
  gap:10px;
  align-items:stretch;
  justify-content:center;
  flex-wrap:wrap;
}

.chipCard{
  min-width: 180px;
  padding: 10px 12px;
  border: 1px solid var(--line);
  border-radius: 14px;
  background: rgba(255,255,255,.78);
  box-shadow: 0 6px 16px rgba(15,23,42,.06);
}
.chipK{ font-size: 12px; color: var(--muted); }
.chipV{ font-size: 15px; font-weight: 900; }

.topbar-right{
  display:flex;
  gap:10px;
  align-items:center;
}
.inline{
  display:flex;
  gap:8px;
  align-items:center;
  font-size: 13px;
  color: var(--muted);
}
select{
  border: 1px solid var(--line);
  border-radius: 10px;
  padding: 8px 10px;
  background: rgba(255,255,255,.9);
}

.btn{
  border: 1px solid rgba(37,99,235,.35);
  background: rgba(37,99,235,.10);
  color: #0f172a;
  font-weight: 800;
  border-radius: 12px;
  padding: 8px 12px;
  cursor:pointer;
}
.btn:hover{ background: rgba(37,99,235,.14); }
.btn.danger{
  border-color: rgba(239,68,68,.35);
  background: rgba(239,68,68,.10);
}
.btn.danger:hover{ background: rgba(239,68,68,.14); }

/* LAYOUT */
.container{
  max-width: 1180px;
  margin: 22px auto 80px;
  padding: 0 14px;
}

.layout-row{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  margin-bottom: 16px;
}

@media (max-width: 980px){
  .layout-row{ grid-template-columns: 1fr; }
  .topbar{ flex-wrap: wrap; }
  .topbar-left{ width: 100%; }
}

/* CARDS */
.card{
  background: var(--card);
  border: 1px solid var(--line);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  overflow: visible; /* avoid clipping weirdness */
}

.card-compact{ padding-bottom: 6px; }

.cardHead{
  padding: 14px 16px 10px;
}

.chip{
  display:inline-block;
  font-size: 11px;
  font-weight: 900;
  letter-spacing: .6px;
  color: var(--blue);
  margin-bottom: 6px;
}

.countyChip{ color: #0f766e; }

h2{
  margin:0;
  font-size: 16px;
  letter-spacing: -.2px;
}

.divider{
  height:1px;
  background: var(--line);
  margin: 0 16px;
}

/* STEPS */
.steps{ padding: 10px 16px 12px; }
.steps-tight ol{ margin: 8px 0 0 18px; padding: 0; }
.stepTitle{ font-weight: 900; font-size: 13px; margin-bottom: 6px; }
.steps-actions{ margin-top: 10px; }

/* FORMS */
.formGrid{
  padding: 12px 16px 12px;
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px 12px;
}
@media (max-width: 520px){
  .formGrid{ grid-template-columns: 1fr; }
}

.field label{
  display:block;
  font-size: 12px;
  color: var(--muted);
  margin-bottom: 6px;
  font-weight: 700;
}
input{
  width: 100%;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid var(--line);
  background: rgba(255,255,255,.85);
  outline: none;
}
input:focus{
  border-color: rgba(37,99,235,.45);
  box-shadow: 0 0 0 4px rgba(37,99,235,.12);
}

.accent{
  border-color: rgba(37,99,235,.22);
  box-shadow: 0 10px 30px rgba(37,99,235,.08);
}

/* EIT */
.eitGrid{
  padding: 12px 16px 12px;
  display:grid;
  grid-template-columns: 2fr 1fr 1fr;
  gap: 10px 12px;
  align-items: stretch;
}
.eit-span2{ grid-column: 1 / span 2; }
.stat{
  border: 1px solid var(--line);
  border-radius: 14px;
  padding: 10px 12px;
  background: rgba(255,255,255,.75);
}
.statVal{ font-weight: 950; font-size: 16px; }

@media (max-width: 900px){
  .eitGrid{ grid-template-columns: 1fr; }
  .eit-span2{ grid-column: auto; }
}

/* TOTAL CARDS (NON-FLOATING FIX) */
.totals{
  padding: 10px 16px 14px;
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px 12px;
}
.totals-tight{ padding-top: 8px; }

.mini{
  border: 1px solid var(--line);
  border-radius: 14px;
  padding: 10px 12px;
  background: rgba(255,255,255,.78);
}
.mini .k{ font-size: 12px; color: var(--muted); font-weight: 800; }
.mini .v{ font-size: 15px; font-weight: 950; }

/* THIS is what was causing the "floating" stuff.
   We keep the class but disable stickiness. */
.totals-sticky{
  position: static;   /* was: sticky */
  bottom: auto;       /* was: 12px */
  background: transparent;
}

/* If you use totals-sticky-up anywhere, keep it harmless */
.totals-sticky-up{
  margin-top: 10px;
}

/* TABLE */
.tableWrap{
  padding: 6px 12px 0;
  overflow: auto;   /* safe */
  max-height: none; /* no collapse */
}

.catTable{
  width: 100%;
  border-collapse: collapse;
  background: rgba(255,255,255,.65);
  border: 1px solid var(--line);
  border-radius: 14px;
  overflow: hidden;
}

.catTable th, .catTable td{
  border-bottom: 1px solid rgba(15,23,42,.08);
  padding: 10px 12px;              /* slightly tighter */
  vertical-align: top;
}

.catTable th{
  text-align: left;
  font-size: 12px;
  color: var(--muted);
  background: rgba(248,250,252,.9);
}

.catTable .num{
  text-align: right;
  font-variant-numeric: tabular-nums;
  white-space: nowrap;
}

/* SCHOOLS TYPOGRAPHY (THIS is the "text too big" fix) */
.catName{
  font-weight: 800;   /* down from 950 */
  font-size: 14px;    /* down from bigger feel */
  letter-spacing: -.1px;
}

.catDesc{
  font-size: 11.5px;  /* smaller + calmer */
  color: var(--muted);
  margin-top: 3px;
  line-height: 1.2;
}

.childRow td{
  background: rgba(248,250,252,.65);
}

.childRow .catName{
  font-weight: 700;
  font-size: 13px;
}

/* BREAKDOWN list */
.reflist{
  padding: 10px 16px 4px;
  display:flex;
  flex-direction: column;
  gap: 10px;
}

.refRow{
  border: 1px solid var(--line);
  border-radius: 14px;
  padding: 10px 12px;
  background: rgba(255,255,255,.78);
  display:flex;
  gap: 10px;
  align-items: flex-start;
  justify-content: space-between;
}
.refLeft{ min-width: 0; }
.refTitle{ font-weight: 950; font-size: 13px; }
.refDesc{ font-size: 12px; color: var(--muted); margin-top: 4px; line-height: 1.25; }
.refAmt{
  font-weight: 950;
  color: var(--blue);
  white-space: nowrap;
  margin-left: 10px;
}

.refSep{
  margin-top: 4px;
  padding: 8px 10px;
  border-radius: 14px;
  border: 1px solid rgba(13,148,136,.22);
  background: rgba(16,185,129,.10);
}
.refSepTitle{
  font-weight: 950;
  color: #0f766e;
  font-size: 12px;
}

.countyItemRow{
  border-color: rgba(13,148,136,.22);
  background: rgba(16,185,129,.08);
}
.countyHighlightRow{
  border-color: rgba(13,148,136,.25);
  background: rgba(16,185,129,.06);
}

/* Shading for county-linked inputs/totals */
.countyTintMini{
  border-color: rgba(13,148,136,.22) !important;
  background: rgba(16,185,129,.08) !important;
}

.refnote{
  padding: 10px 16px 14px;
  color: var(--muted);
  font-size: 12px;
  line-height: 1.3;
}
